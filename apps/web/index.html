<!doctype html>
<html>
  <head><meta charset="utf-8"><title>RAG Query</title></head>
  <body>
    <h2>Ask RAG</h2>
    <textarea id="q" rows="4" cols="60">What are my main skills?</textarea><br/>
    <button id="ask">Ask</button>

    <h3>Answer:</h3>
    <div id="answer"></div>

    <h3>Sources:</h3>
    <ul id="sources"></ul>

    <script>
      document.getElementById("ask").onclick = async () => {
        const q = document.getElementById("q").value;
        const res = await fetch("http://localhost:8000/ask", {
          method: "POST",
          headers: {"Content-Type":"application/json"},
          body: JSON.stringify({query:q})
        });
        const j = await res.json();

        // Show answer
        document.getElementById("answer").textContent = j.answer || "No answer";

        // Show sources
        const sourcesEl = document.getElementById("sources");
        sourcesEl.innerHTML = "";
        if (j.retrieved) {
          j.retrieved.forEach(s => {
            const li = document.createElement("li");
            li.textContent = `${s.source} (score: ${s.score.toFixed(2)})`;
            sourcesEl.appendChild(li);
          });
        }
      };
    </script>
  </body>
</html>
